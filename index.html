<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Dashboard de Concorrência - Nicopel Embalagens</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <style>
    :root{
      --primary-color:#0d6efd;--secondary-color:#6c757d;--background-color:#f8f9fa;
      --card-background:#ffffff;--text-color:#212529;--border-color:#e9ecef;
      --shadow:0 4px 6px rgba(0,0,0,.04);--shadow-hover:0 7px 14px rgba(0,0,0,.07);
      --sidebar:#10151c; --sidebar-text:#e9eef5; --sidebar-muted:#98a6b3; --sidebar-active:#1c2430;
      --danger:#dc3545; --chip:#eef3ff; --chip-text:#264a9a;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,sans-serif;background:var(--background-color);color:var(--text-color);line-height:1.5;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}

    /* LAYOUT */
    .app{display:grid; grid-template-columns: 260px 1fr; min-height:100dvh;}
    aside{background:var(--sidebar); color:var(--sidebar-text); padding:16px; position:sticky; top:0; align-self:start; min-height:100dvh;}
    .brand{display:flex; align-items:center; gap:10px; margin-bottom:14px;}
    .brand h2{margin:0; font-size:1.1rem; font-weight:800; letter-spacing:.2px}
    .sidebar-note{color:var(--sidebar-muted); font-size:.84rem; margin:0 0 14px}
    .nav{display:flex; flex-direction:column; gap:6px; margin-top:8px;}
    .nav button{all:unset; display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:10px; color:var(--sidebar-text); cursor:pointer; font-weight:600;}
    .nav button:hover{background:var(--sidebar-active)}
    .nav button.active{background:var(--primary-color); color:#fff}
    .sidebar-toggle{display:none; position:fixed; top:10px; left:10px; z-index:1100; background:#fff; border:1px solid var(--border-color); border-radius:10px; padding:8px 10px; font-weight:700; box-shadow:var(--shadow); cursor:pointer;}
    @media (max-width: 900px){
      .app{grid-template-columns: 1fr}
      aside{position:fixed; inset:0 35% 0 0; transform:translateX(-100%); transition:.25s; z-index:1000}
      aside.open{transform:translateX(0)}
      .content.dim::before{content:""; position:fixed; inset:0; background:rgba(0,0,0,.35); z-index:999;}
      .sidebar-toggle{display:block}
    }
    .content{min-width:0}
    .container{max-width:1200px;margin:0 auto;padding:clamp(12px,2vw,20px)}
    header{text-align:center;margin-bottom:clamp(16px,3vw,28px)}
    header h1{margin:0 0 6px;font-weight:700;font-size:clamp(1.25rem,2.4vw+0.5rem,2.2rem)}
    header p{margin:0;color:var(--secondary-color);font-size:clamp(.9rem,1.2vw+.5rem,1rem)}

    .filter-group{border-bottom:1px solid var(--border-color);padding-bottom:1rem;margin-bottom:1rem}
    .filter-group:last-of-type{border-bottom:none}
    .tabs-nav{display:flex;gap:8px;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none;padding:4px 0}
    .tabs-nav::-webkit-scrollbar{display:none}
    .tab-btn{flex:0 0 auto;white-space:nowrap;font-weight:600;font-size:.95rem;padding:10px 14px;border:1px solid var(--border-color);background:#fff;color:var(--secondary-color);border-radius:999px;cursor:pointer;transition:.2s}
    .tab-btn:hover{background:#f1f3f5}
    .tab-btn.active{background:var(--primary-color);color:#fff;border-color:var(--primary-color)}
    .toolbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between;margin:.5rem 0 0}
    .search{flex:1;min-width:220px}
    .search input{width:100%;padding:10px 12px;border:1px solid var(--border-color);border-radius:10px;background:#fff}
    .sort{display:flex;gap:8px;align-items:center}
    select{padding:10px 12px;border:1px solid var(--border-color);border-radius:10px;background:#fff}

    .chipbar{display:flex; gap:8px; flex-wrap:wrap; margin-top:10px}
    .chip{background:var(--chip); color:var(--chip-text); padding:6px 10px; border-radius:999px; font-weight:600; cursor:pointer; border:1px solid #d9e5ff}
    .chip.active{outline:2px solid var(--primary-color)}

    #competitors-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:clamp(12px,2.2vw,20px);margin-top:1rem}
    .competitor-card{cursor:pointer;background:#fff;border:1px solid var(--border-color);border-radius:12px;padding:clamp(14px,1.8vw,20px);box-shadow:var(--shadow);transition:.2s;display:flex;flex-direction:column;min-height:160px}
    .competitor-card:hover{transform:translateY(-4px);box-shadow:var(--shadow-hover)}
    .competitor-card.hidden{display:none}
    .card-header{display:flex;align-items:center;gap:12px;margin-bottom:8px}
    .threat-level{width:14px;height:14px;border-radius:50%; flex-shrink: 0;}
    .threat-high{background:#dc3545}.threat-medium{background:#fd7e14}.threat-low{background:#ffc107}
    .card-header h3{margin:0;font-size:clamp(1.05rem,1.2vw+.8rem,1.3rem);font-weight:700}
    .card-body{flex-grow:1}
    .info-item{display:flex;align-items:center;gap:10px;margin:8px 0;font-size:0.9rem;color:var(--secondary-color)}
    .info-item svg{width:16px;height:16px;color:var(--secondary-color);flex-shrink:0}
    .card-analysis-preview{font-size:.9rem;color:#495057;margin:12px 0 0;line-height:1.6;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;flex-grow:1}
    .card-actions{display:flex;gap:8px;flex-wrap:wrap}
    .action-btn{display:inline-flex;align-items:center;gap:8px;padding:6px 12px;font-size:.9rem;line-height:1;border-radius:8px;border:1px solid var(--border-color);background:#fff;color:var(--text-color);font-weight:600;text-decoration:none;transition:background .15s,border-color .15s,transform .06s}
    .action-btn svg{width:18px;height:18px;color:var(--secondary-color)}
    .action-btn:hover{background:#f8f9fa}
    .btn-website{color:var(--primary-color);border-color:#d0e3ff}
    .btn-instagram{color:#d6336c;border-color:#f3d0db}

    /* MODAL */
    .modal-overlay{position:fixed;inset:0;background:rgba(33,37,41,.6);display:flex;justify-content:center;align-items:center;z-index:1000;opacity:0;visibility:hidden;transition:opacity .25s,visibility .25s;padding:1rem}
    .modal-overlay.active{opacity:1;visibility:visible}
    .modal-content{background:#fff;border-radius:12px;width:100%;max-width:800px;max-height:min(90vh,700px);display:flex;flex-direction:column;overflow:hidden;transform:translateY(10px);transition:transform .25s}
    .modal-overlay.active .modal-content{transform:translateY(0)}
    .modal-header{padding:12px 16px;border-bottom:1px solid var(--border-color);position:sticky;top:0;background:#fff;z-index:1}
    .modal-close-btn{position:absolute;top:10px;right:10px;background:#f1f3f5;border:none;width:32px;height:32px;border-radius:50%;font-size:1.2rem;cursor:pointer;color:var(--secondary-color)}
    .modal-body{padding:16px;overflow:auto;display:flex;flex-direction:column;gap:16px}
    .modal-footer{padding:12px 16px;border-top:1px solid var(--border-color);background:#f8f9fa;position:sticky;bottom:0}
    .modal-body .info-item{color:var(--text-color)}
    .modal-body .info-item svg{color:var(--secondary-color)}
    @media (max-width:767px){.modal-content{width:100%;height:100%;max-width:none;max-height:none;border-radius:0}}
    @media (max-width:360px){#competitors-grid{grid-template-columns:1fr}}

    /* FORM / TABELA */
    .card{background:#fff; border:1px solid var(--border-color); border-radius:12px; padding:16px; box-shadow:var(--shadow)}
    .form-grid{display:grid; grid-template-columns: repeat(12, 1fr); gap:12px}
    .form-grid .col-12{grid-column: span 12}
    .form-grid .col-6{grid-column: span 6}
    .form-grid .col-4{grid-column: span 4}
    .form-grid .col-3{grid-column: span 3}
    .form-grid .col-8{grid-column: span 8}
    @media (max-width: 800px){.form-grid .col-6,.form-grid .col-4,.form-grid .col-3,.form-grid .col-8{grid-column: span 12}}
    label{font-weight:600; font-size:.92rem}
    input[type="text"], input[type="url"], input[type="number"], select, textarea{width:100%; padding:10px 12px; border:1px solid var(--border-color); border-radius:10px; background:#fff; font:inherit}
    textarea{min-height:110px; resize:vertical}
    .form-actions{display:flex; gap:10px; justify-content:flex-end; margin-top:10px}
    .btn{appearance:none; border:1px solid var(--border-color); background:#fff; padding:10px 14px; border-radius:10px; font-weight:700; cursor:pointer;}
    .btn-primary{background:var(--primary-color); color:#fff; border-color:var(--primary-color)}
    .btn-danger{background:var(--danger); color:#fff; border-color:var(--danger)}
    .btn:disabled{opacity:.6; cursor:not-allowed}
    .help{color:var(--secondary-color); font-size:.85rem; margin-top:6px}
    .table{width:100%; border-collapse:collapse}
    .table th,.table td{border-bottom:1px solid var(--border-color); padding:10px; text-align:left; font-size:.95rem}
    .table th{color:#495057; font-weight:700}
    .table-actions{display:flex; gap:8px}
    .table thead th:first-child, .table tbody td:first-child{width:28px}

    /* RELATÓRIO (PRINT) */
    .report-wrap{max-width:1000px;margin:0 auto}
    .report-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    .report-meta{color:#6c757d;font-size:.9rem}
    .report-table{width:100%;border-collapse:collapse}
    .report-table th,.report-table td{border-bottom:1px solid #e6e6e6;padding:8px 6px;text-align:left;font-size:.95rem}
    .print-bar{display:flex;justify-content:flex-end;gap:8px;margin-bottom:8px}

    @media print{
      body{background:#fff}
      aside, .sidebar-toggle, .toolbar, .filter-group, .chipbar, .print-bar, .modal-overlay{display:none !important}
      .container{padding:0}
      .card{box-shadow:none; border: none}
      .report-table th,.report-table td{border-color:#ccc}
      .nav, header{text-align:left}
    }
  </style>
</head>
<body>
  <button class="sidebar-toggle" id="sidebarToggle">Menu</button>

  <!-- ícones -->
  <svg xmlns="http://www.w3.org/2000/svg" style="display:none">
    <symbol id="icon-location" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></symbol>
    <symbol id="icon-focus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></symbol>
    <symbol id="icon-website" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></symbol>
    <symbol id="icon-instagram" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></symbol>
  </svg>

  <div class="app">
    <!-- Sidebar -->
    <aside id="sidebar">
      <div class="brand">
        <span style="width:10px;height:10px;border-radius:50%;background:#3aa9ff;display:inline-block"></span>
        <h2>Concorrência Nicopel</h2>
      </div>
      <p class="sidebar-note">Navegue entre o Dashboard e as ferramentas.</p>
      <nav class="nav" id="app-nav">
        <button class="active" data-view="dashboard">🏷️ Dashboard</button>
        <button data-view="add">➕ Adicionar Concorrente</button>
        <button data-view="edit">✏️ Editar / Excluir</button>
        <button data-view="io">⤴️⤵️ Importar / Exportar</button>
        <button data-view="report">🖨️ Relatório (Imprimir)</button>
      </nav>
      <p class="sidebar-note" style="margin-top:18px">Atualizado em <span id="last-updated-side"></span></p>
    </aside>

    <!-- Content -->
    <main class="content" id="content">
      <!-- DASHBOARD VIEW -->
      <section id="view-dashboard">
        <div class="container">
          <header>
            <h1>Dashboard de Concorrência</h1>
            <p>Análise de Mercado para Nicopel Embalagens</p>
          </header>

          <div class="filter-group">
            <nav id="category-nav" class="tabs-nav" aria-label="Categorias de Produto">
              <button class="tab-btn active" data-category="todos" type="button">Todas Categorias</button>
              <button class="tab-btn" data-category="potes-copos" type="button">Potes e Copos</button>
              <button class="tab-btn" data-category="caixas-sorvete" type="button">Caixas de Sorvete</button>
              <button class="tab-btn" data-category="caixas-pizza" type="button">Caixas de Pizza</button>
              <button class="tab-btn" data-category="embalagens-industriais" type="button">Embalagens Industriais</button>
            </nav>
          </div>

          <div class="toolbar">
            <div class="tabs-nav" id="threat-nav" aria-label="Tipo de Concorrência" style="padding:0">
              <button class="tab-btn active" data-threat="todos" type="button">Todos</button>
              <button class="tab-btn" data-threat="direto" type="button">⚡ Diretos</button>
              <button class="tab-btn" data-threat="indireto" type="button">🔄 Indiretos</button>
            </div>

            <div class="search">
              <input id="search-input" type="text" placeholder="Buscar por nome, cidade ou tag..." />
            </div>

            <div class="sort">
              <label for="sort-select">Ordenar:</label>
              <select id="sort-select">
                <option value="az">Nome (A–Z)</option>
                <option value="za">Nome (Z–A)</option>
                <option value="cidade">Cidade</option>
                <option value="ameaca">Nível de ameaça</option>
              </select>
            </div>
          </div>

          <div id="tag-chipbar" class="chipbar" aria-label="Filtrar por Tags"></div>

          <main id="competitors-grid">
            <!-- os cards iniciais do HTML são migrados automaticamente para o storage (1ª execução) -->
          </main>

          <footer style="text-align:center;margin-top:16px;color:var(--secondary-color)">
            <p>Dashboard atualizado em <span id="last-updated"></span></p>
          </footer>
        </div>
      </section>

      <!-- ADD VIEW -->
      <section id="view-add" style="display:none">
        <div class="container">
          <header>
            <h1>Adicionar Concorrente</h1>
            <p>Preencha os campos abaixo. Os dados ficam salvos no seu navegador e aparecem no Dashboard.</p>
          </header>

          <div class="card">
            <form id="add-form">
              <div class="form-grid">
                <div class="col-6"><label for="f-name">Nome*</label><input id="f-name" type="text" required /></div>
                <div class="col-6"><label for="f-city">Cidade/UF*</label><input id="f-city" type="text" required /></div>
                <div class="col-4"><label for="f-threat">Nível de Ameaça*</label>
                  <select id="f-threat" required><option value="">Selecione</option><option value="alta">Alta (Direto)</option><option value="media">Média (Indireto)</option><option value="baixa">Baixa (Indireto)</option></select>
                </div>
                <div class="col-8"><label for="f-category">Categoria*</label>
                  <select id="f-category" required><option value="">Selecione</option><option value="potes-copos">Potes e Copos</option><option value="caixas-sorvete">Caixas de Sorvete</option><option value="caixas-pizza">Caixas de Pizza</option><option value="embalagens-industriais">Embalagens Industriais</option></select>
                </div>
                <div class="col-6"><label for="f-website">Website</label><input id="f-website" type="url" placeholder="https://..." /></div>
                <div class="col-6"><label for="f-instagram">Instagram</label><input id="f-instagram" type="url" placeholder="https://instagram.com/..." /></div>
                <div class="col-6"><label for="f-phone">Telefone</label><input id="f-phone" type="text" placeholder="(11) 99999-9999" /></div>
                <div class="col-6"><label for="f-cnpj">CNPJ</label><input id="f-cnpj" type="text" placeholder="00.000.000/0000-00" /></div>
                <div class="col-6"><label for="f-tags">Tags</label><input id="f-tags" type="text" placeholder="ex.: sorvete, premium, kraft" /></div>
                <div class="col-6"><label for="f-ticket">Ticket médio (R$)</label><input id="f-ticket" type="number" step="0.01" min="0" /></div>
                <div class="col-12"><label for="f-focus">Foco (curto)</label><input id="f-focus" type="text" /></div>
                <div class="col-12"><label for="f-analysis">Análise (interna)</label><textarea id="f-analysis" placeholder="Observações estratégicas"></textarea></div>
              </div>
              <div class="form-actions">
                <button type="reset" class="btn">Limpar</button>
                <button id="btn-save" type="submit" class="btn btn-primary">Salvar Concorrente</button>
              </div>
            </form>
          </div>
        </div>
      </section>

      <!-- EDIT VIEW -->
      <section id="view-edit" style="display:none">
        <div class="container">
          <header><h1>Editar / Excluir</h1><p>Atualize os dados dos concorrentes. Selecione vários para ações em lote.</p></header>

          <div class="card" style="margin-bottom:14px">
            <div class="form-grid">
              <div class="col-6"><input id="edit-search" type="text" placeholder="Buscar por nome/cidade/tag..." /></div>
              <div class="col-3">
                <select id="edit-sort">
                  <option value="az">Nome (A–Z)</option>
                  <option value="za">Nome (Z–A)</option>
                  <option value="cidade">Cidade</option>
                  <option value="ameaca">Nível de ameaça</option>
                </select>
              </div>
              <div class="col-3" style="display:flex; gap:8px; justify-content:flex-end">
                <button id="bulk-archive" class="btn">Arquivar</button>
                <button id="bulk-unarchive" class="btn">Desarquivar</button>
                <button id="bulk-delete" class="btn btn-danger">Excluir</button>
              </div>
            </div>
          </div>

          <div class="card" style="margin-bottom:14px">
            <button id="btn-sanitize" class="btn">Atualizar links/Regiões</button>
            <p class="help">Normaliza links do Instagram e padroniza “Cidade - UF” (UF em maiúsculas). Use quando importar dados ou para corrigir rapidamente.</p>
          </div>

          <div class="card">
            <table class="table" id="edit-table">
              <thead>
                <tr><th></th><th>Nome</th><th>Cidade</th><th>Ameaça</th><th>Categoria</th><th>Status</th><th style="width:210px">Ações</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <div class="card" style="margin-top:14px">
            <h3 style="margin-top:0">Formulário de Edição</h3>
            <form id="edit-form">
              <input type="hidden" id="e-id" />
              <div class="form-grid">
                <div class="col-6"><label for="e-name">Nome*</label><input id="e-name" type="text" required /></div>
                <div class="col-6"><label for="e-city">Cidade/UF*</label><input id="e-city" type="text" required /></div>
                <div class="col-4"><label for="e-threat">Nível de Ameaça*</label>
                  <select id="e-threat" required><option value="alta">Alta</option><option value="media">Média</option><option value="baixa">Baixa</option></select>
                </div>
                <div class="col-8"><label for="e-category">Categoria*</label>
                  <select id="e-category" required><option value="potes-copos">Potes e Copos</option><option value="caixas-sorvete">Caixas de Sorvete</option><option value="caixas-pizza">Caixas de Pizza</option><option value="embalagens-industriais">Embalagens Industriais</option></select>
                </div>
                <div class="col-6"><label for="e-website">Website</label><input id="e-website" type="url" /></div>
                <div class="col-6"><label for="e-instagram">Instagram</label><input id="e-instagram" type="url" /></div>
                <div class="col-6"><label for="e-phone">Telefone</label><input id="e-phone" type="text" /></div>
                <div class="col-6"><label for="e-cnpj">CNPJ</label><input id="e-cnpj" type="text" /></div>
                <div class="col-6"><label for="e-tags">Tags</label><input id="e-tags" type="text" /></div>
                <div class="col-6"><label for="e-ticket">Ticket médio (R$)</label><input id="e-ticket" type="number" step="0.01" min="0" /></div>
                <div class="col-12"><label for="e-focus">Foco</label><input id="e-focus" type="text" /></div>
                <div class="col-12"><label for="e-analysis">Análise</label><textarea id="e-analysis"></textarea></div>
              </div>
              <div class="form-actions">
                <button type="button" id="e-archive" class="btn">Arquivar</button>
                <button type="button" id="e-delete" class="btn btn-danger">Excluir</button>
                <button type="submit" class="btn btn-primary">Salvar Alterações</button>
              </div>
              <p class="help">“Arquivar” oculta dos grids sem apagar do histórico (útil para itens originais). “Excluir” remove definitivamente.</p>
            </form>
          </div>
        </div>
      </section>

      <!-- IMPORT/EXPORT VIEW -->
      <section id="view-io" style="display:none">
        <div class="container">
          <header><h1>Importar / Exportar</h1><p>Faça backup dos concorrentes ou importe um JSON. Também dá pra atualizar em massa por Nome.</p></header>

          <div class="card" style="margin-bottom:14px">
            <div class="form-grid">
              <div class="col-12">
                <button id="btn-export" class="btn">Exportar JSON</button>
                <input type="file" id="file-import" accept="application/json" style="margin-left:10px" />
                <button id="btn-import" class="btn btn-primary">Importar JSON</button>
              </div>
            </div>
            <p class="help">Formato: lista de objetos com os campos do formulário (inclui id, builtIn, archived).</p>
          </div>

          <div class="card" style="margin-bottom:14px">
            <h3 style="margin:0 0 8px">Atualização Rápida (colar JSON mapeando “name”)</h3>
            <textarea id="bulk-update" placeholder='Ex.: [{"name":"Soller Embalagens","instagram":"https://instagram.com/sollerembalagens/","location":"Biguaçu - SC"}]' style="width:100%; min-height:140px"></textarea>
            <div class="form-actions">
              <button id="btn-apply-bulk" class="btn btn-primary">Aplicar Atualizações</button>
            </div>
          </div>

          <div class="card">
            <h3 style="margin:0 0 8px">Preview do JSON (somente leitura)</h3>
            <textarea id="io-preview" style="width:100%; min-height:260px" readonly></textarea>
          </div>
        </div>
      </section>

      <!-- REPORT/PRINT VIEW -->
      <section id="view-report" style="display:none">
        <div class="container report-wrap">
          <div class="print-bar">
            <button id="btn-print" class="btn btn-primary">Imprimir PDF</button>
          </div>
          <div class="card">
            <div class="report-header">
              <h1 style="margin:0">Relatório de Concorrência</h1>
              <div class="report-meta">
                <div>Gerado em <span id="report-date"></span></div>
                <div>Filtros: <span id="report-filters"></span></div>
              </div>
            </div>

            <div style="display:flex; gap:10px; flex-wrap:wrap; margin:10px 0">
              <select id="report-category">
                <option value="todos">Todas Categorias</option>
                <option value="potes-copos">Potes e Copos</option>
                <option value="caixas-sorvete">Caixas de Sorvete</option>
                <option value="caixas-pizza">Caixas de Pizza</option>
                <option value="embalagens-industriais">Embalagens Industriais</option>
              </select>
              <select id="report-threat">
                <option value="todos">Todos</option>
                <option value="direto">Diretos (Alta)</option>
                <option value="indireto">Indiretos (Média/Baixa)</option>
              </select>
              <input id="report-search" type="text" placeholder="Buscar por nome/cidade/tag..." style="flex:1" />
            </div>

            <div style="display:flex; gap:16px; flex-wrap:wrap; margin:6px 0 14px">
              <div><strong>Total:</strong> <span id="rep-count">0</span></div>
              <div><strong>Diretos (Alta):</strong> <span id="rep-count-alta">0</span></div>
              <div><strong>Indiretos (M/B):</strong> <span id="rep-count-ind">0</span></div>
            </div>

            <table class="report-table" id="report-table">
              <thead>
                <tr>
                  <th>Nome</th><th>Cidade</th><th>Ameaça</th><th>Categoria</th><th>Instagram</th><th>Website</th><th>Tags</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- MODAL -->
  <div id="competitor-modal" class="modal-overlay" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal-content">
      <header class="modal-header">
        <div id="modal-header-content" class="card-header"></div>
        <button id="modal-close-btn" class="modal-close-btn" aria-label="Fechar modal">&times;</button>
      </header>
      <div class="modal-body">
        <div id="modal-location" class="info-item"></div>
        <div id="modal-focus" class="info-item"></div>
        <p id="modal-analysis" style="margin:0; line-height: 1.7;"></p>
      </div>
      <footer class="modal-footer">
        <div id="modal-actions" class="card-actions"></div>
      </footer>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
